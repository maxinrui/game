!function($,i){"use strict";var t,e;t=new Phaser.Game(400,490,Phaser.AUTO,"gameDiv"),e={preload:function(){t.stage.backgroundColor="#71c5cf",t.load.image("bird","img/bird.png"),t.load.image("pipe","img/pipe.png"),t.load.audio("jump","jump.wav")},create:function(){t.physics.startSystem(Phaser.Physics.ARCADE),this.bird=this.game.add.sprite(100,245,"bird"),this.bird.alive=!0,t.physics.arcade.enable(this.bird),this.bird.body.gravity.y=1e3;var i=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);i.onDown.add(this.jump,this),this.pipes=t.add.group(),this.pipes.enableBody=!0,this.pipes.createMultiple(20,"pipe"),this.timer=t.time.events.loop(1500,this.addRowOfPipes,this),this.score=0,this.labelScore=t.add.text(20,20,"0",{font:"30px Arial",fill:"#ffffff"}),this.bird.anchor.setTo(-.2,.5),this.jumpSound=t.add.audio("jump")},update:function(){this.bird.inWorld===!1&&this.restartGame(),t.physics.arcade.overlap(this.bird,this.pipes,this.hitPipe,null,this),this.bird.angle<20&&(this.bird.angle+=1)},jump:function(){if(this.bird.alive!==!1){this.bird.body.velocity.y=-350;var i=t.add.tween(this.bird);i.to({angle:-20},100),i.start(),this.jumpSound.play()}},restartGame:function(){t.state.start("main")},addOnePipe:function(i,t){var e=this.pipes.getFirstDead();e.reset(i,t),e.body.velocity.x=-200,e.checkWorldBounds=!0,e.outOfBoundsKill=!0},addRowOfPipes:function(){var i=Math.floor(5*Math.random())+1,t;for(t=0;8>t;t++)t!==i&&t!==i+1&&this.addOnePipe(400,60*t+10);this.score+=1,this.labelScore.text=this.score},hitPipe:function(){this.bird.alive!==!1&&(this.bird.alive=!1,t.time.events.remove(this.timer),this.pipes.forEachAlive(function(i){i.body.velocity.x=0},this))}},t.state.add("main",e),t.state.start("main")}(jQuery,window.app=window.app||{});